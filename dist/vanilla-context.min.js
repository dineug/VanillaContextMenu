!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.VanillaContext=e():t.VanillaContext=e()}(window,(function(){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){this.nodes=[]}return t.prototype.add=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];e.forEach((function(t){var e=t.element,n=t.event,o=t.listener;e.addEventListener(n,o)})),(t=this.nodes).push.apply(t,e)},t.prototype.remove=function(e){var n=this.nodes.indexOf(e);if(!(n>=0))throw new Error("No matched event node");t.invalidate(this.nodes[n]),this.nodes.splice(n,1)},t.prototype.destroy=function(){this.nodes.forEach(this.remove)},t.invalidate=function(t){t.element.removeEventListener(t.event,t.listener)},t}();e.VanillaEventContainer=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),i=n(4),s=function(){function t(e){this.layout=document.createElement("ul"),this.eventContainer=new o.VanillaEventContainer,this.children=[],this.layout.classList.add(t.ClassList.default),this.setChildren(e)}return t.prototype.setChildren=function(t){var e=this;t.forEach((function(t){var n=new i.VanillaContextItem(e,t);e.layout.appendChild(n.layout),e.children.push(n)}))},t.prototype.setPosition=function(t){this.layout.style.top=t.y+"px",this.layout.style.left=t.x+"px"},t.prototype.show=function(){this.layout.classList.add(t.ClassList.active)},t.prototype.hide=function(){this.layout.classList.remove(t.ClassList.active),this.children.forEach((function(t){return t.hide()}))},t.prototype.destroy=function(){this.eventContainer.destroy(),this.children.forEach((function(t){return t.destroy()}))},t.prototype.selectItem=function(t){this.children.forEach((function(e){t!==e&&e.hide()}))},t.ClassList={default:"vanilla-context-ul",active:"vanilla-context-ul-active"},t}();e.VanillaContextGroup=s},function(t,e,n){"use strict";var o=n(3);n(5),t.exports=o.VanillaContext},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),i=n(0),s=function(){function t(t,e){this.eventContainer=new i.VanillaEventContainer,this.element=t,this.setListener(t),this.getContextData=e}return t.prototype.setListener=function(t){this.eventContainer.add({element:document,event:"click",listener:this.onWindowClick.bind(this)},{element:t,event:"contextmenu",listener:this.onContextRequest.bind(this)})},t.prototype.onContextRequest=function(t){if(t.target){if(t.preventDefault(),this.contextGroup&&this.contextGroup.layout.contains(t.target))return;this.removeOldContext(),this.showContext(t)}},t.prototype.onWindowClick=function(t){if(t.target){if(this.contextGroup&&this.contextGroup.layout.contains(t.target))return;this.removeOldContext()}},t.prototype.showContext=function(e){this.contextGroup=new o.VanillaContextGroup(this.getContextData(e)),this.element.appendChild(this.contextGroup.layout),this.contextGroup.layout.style.top=t.getMousePosition(e).y+"px",this.contextGroup.layout.style.left=t.getMousePosition(e).x+"px",this.contextGroup.show()},t.prototype.removeOldContext=function(){if(this.contextGroup){this.contextGroup.destroy();var t=this.contextGroup.layout.parentElement;t&&t.removeChild(this.contextGroup.layout)}},t.prototype.close=function(){this.removeOldContext()},t.prototype.destroy=function(){this.eventContainer.destroy()},t.getMousePosition=function(t){var e=t,n=0,o=0;return e.pageX||e.pageY?(n=e.pageX,o=e.pageY):(e.clientX||e.clientY)&&(n=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,o=e.clientY+document.body.scrollTop+document.documentElement.scrollTop),{x:n,y:o}},t}();e.VanillaContext=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),i=n(0),s=function(){function t(e,n){this.layout=document.createElement("li"),this.eventContainer=new i.VanillaEventContainer,this.group=e,this.node=n,this.layout.classList.add(t.ClassList.default),this.setChild(n.children),this.setRenderer(n.renderer),this.setEventListener()}return t.prototype.setRenderer=function(e){var n=this,o=e(),i=document.createElement("div");if(i.classList.add(t.ClassList.text),o instanceof HTMLElement?i.appendChild(o):i.innerHTML=o,this.layout.append(i),this.child){var s=document.createElement("div");s.classList.add(t.ClassList.icon);var r=document.createElement("img");r.classList.add(t.ClassList.image),r.setAttribute("src","http://cdn.onlinewebfonts.com/svg/img_414447.png"),s.appendChild(r),this.layout.appendChild(s)}this.layout.querySelectorAll("input, button, i").forEach((function(t){n.eventContainer.add({element:t,event:"click",listener:n.setPreventClick.bind(n)})}))},t.prototype.setPreventClick=function(t){t.preventDefault()},t.prototype.setChild=function(t){t&&(this.child=new o.VanillaContextGroup(t),this.layout.appendChild(this.child.layout))},t.prototype.setEventListener=function(){this.eventContainer.add({element:this.layout,event:"mouseover",listener:this.onMouseOver.bind(this)},{element:this.layout,event:"mouseout",listener:this.onMouseOut.bind(this)},{element:this.layout,event:"click",listener:this.onClick.bind(this)})},t.prototype.onMouseOver=function(e){this.layout.classList.add(t.ClassList.hover),this.child&&(this.child.show(),this.child.setPosition(this.getChildLocation(e))),this.group.selectItem(this)},t.prototype.onMouseOut=function(e){this.layout.classList.remove(t.ClassList.hover)},t.prototype.getChildLocation=function(t){var e=this.group.layout.getBoundingClientRect();return{x:e.x+e.width-1,y:this.layout.getBoundingClientRect().top}},t.prototype.show=function(){this.child&&this.child.show()},t.prototype.hide=function(){this.child&&this.child.hide()},t.prototype.onClick=function(t){this.node.onClick&&this.node.onClick(t)},t.prototype.destroy=function(){this.child&&this.child.destroy()},t.ClassList={default:"vanilla-context-li",hover:"vanilla-context-li-hover",text:"vanilla-context-text-container",icon:"vanilla-context-icon-container",image:"vanilla-context-icon"},t}();e.VanillaContextItem=s},function(t,e,n){}])}));